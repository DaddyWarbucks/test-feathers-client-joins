{"version":3,"sources":["../node_modules/shared sync /^/.//.*$","App.jsx","index.js","feathers/app.js","feathers/app.hooks.js","feathers/batchClient.js","feathers/posts.js","feathers/profile.js","feathers/categories.js","feathers/users.js"],"names":["map","webpackContext","req","id","webpackContextResolve","__webpack_require__","o","e","Error","code","keys","Object","resolve","module","exports","App","props","componentDidMount","a","app","authenticate","strategy","email","password","loadPosts","setState","loading","service","create","start","Date","getTime","find","query","$sort","_id","$limit","method","state","joinLocation","posts","end","serverProfile","clientProfile","duration","error","provider","URLSearchParams","window","location","search","get","useBatch","this","className","href","disabled","onClick","set","target","rel","message","style","width","height","JSON","stringify","React","Component","ReactDOM","render","StrictMode","document","getElementById","process","hrtime","require","profiler","getProfile","clearProfile","feathers","configure","rest","fetch","socketio","io","authentication","mixins","push","loaderFactory","opts","params","options","multi","serviceParams","paginate","BatchLoader","$in","getUniqueKeys","result","getResultsByKey","data","rec","profile","categories","users","logger","stats","hooks","appHooks","batchClient","batchService","exclude","setup","before","all","setupLoader","paramsForServer","update","patch","remove","after","context","console","convert","BatchManager","batches","timeout","batch","setTimeout","flush","currentBatches","calls","payload","results","forEach","index","callResult","status","value","reject","reason","makeArguments","excludes","concat","manager","collectBatches","path","includes","args","batchPromise","Promise","addBatchCall","switchHook","Profile","use","_log"],"mappings":"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","file":"static/js/main.9d5492ab.chunk.js","sourcesContent":["var map = {\n\t\"./\": 4,\n\t\"./categories\": 57,\n\t\"./categories.js\": 57,\n\t\"./index\": 4,\n\t\"./index.js\": 4,\n\t\"./package\": 61,\n\t\"./package.json\": 61,\n\t\"./posts\": 62,\n\t\"./posts.js\": 62,\n\t\"./users\": 63,\n\t\"./users.js\": 63\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 118;","import React from 'react';\nimport app from './feathers/app';\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    const urlParams = new URLSearchParams(window.location.search);\n    const provider = urlParams.get('provider') || 'socket';\n\n    this.state = {\n      loading: true,\n      error: null,\n      serverProfile: null,\n      clientProfile: null,\n      posts: null,\n      duration: null,\n      useBatch: false,\n      method: 'primary',\n      joinLocation: 'client',\n      provider\n    };\n  }\n\n  componentDidMount = async () => {\n    await app.authenticate({\n      strategy: 'local',\n      email: 'na@example.com',\n      password: 'password'\n    });\n\n    this.loadPosts();\n  };\n\n  loadPosts = async () => {\n    this.setState({ loading: true });\n    try {\n      await app.service('server/profile').create({});\n      await app.service('client/profile').create({});\n\n      const start = new Date().getTime();\n      const posts = await app.service('api/posts').find({\n        query: {\n          $sort: { _id: 1 },\n          $limit: 100\n        },\n        method: this.state.method,\n        joinLocation: this.state.joinLocation\n      });\n      const end = new Date().getTime();\n\n      const serverProfile = await app.service('server/profile').find();\n      const clientProfile = await app.service('client/profile').find();\n\n      this.setState({\n        posts,\n        duration: end - start,\n        serverProfile,\n        clientProfile,\n        loading: false,\n        error: null\n      });\n    } catch (error) {\n      this.setState({\n        error,\n        loading: false\n      });\n    }\n  };\n\n  render() {\n    const {\n      loading,\n      error,\n      serverProfile,\n      clientProfile,\n      posts,\n      duration,\n      useBatch,\n      method,\n      joinLocation,\n      provider\n    } = this.state;\n\n    return (\n      <div className=\"container mt-4\">\n        <div className=\"mb-4\">\n          <h4>Provider</h4>\n          <div className=\"btn-group mb-2\">\n            <a\n              className={`btn btn-secondary ${\n                provider === 'socket' ? 'active' : ''\n              }`}\n              href=\"/?provider=socket\"\n            >\n              Socket\n            </a>\n            <a\n              className={`btn btn-secondary ${\n                provider === 'rest' ? 'active' : ''\n              }`}\n              href=\"/?provider=rest\"\n            >\n              REST\n            </a>\n          </div>\n          <p className=\"lead\">\n            Configure the feathers-client to make calls either via Socket or\n            REST\n          </p>\n        </div>\n\n        <div className=\"mb-4\">\n          <h4>Join Location</h4>\n          <div className=\"btn-group mb-2\">\n            <button\n              disabled={loading}\n              className={`btn btn-primary ${\n                joinLocation === 'client' && !useBatch ? 'active' : ''\n              }`}\n              onClick={() => {\n                this.setState(\n                  { joinLocation: 'client', useBatch: false },\n                  () => {\n                    this.loadPosts();\n                    app.set('useBatch', false);\n                  }\n                );\n              }}\n            >\n              Client\n            </button>\n            <button\n              disabled={loading}\n              className={`btn btn-primary ${\n                joinLocation === 'server' ? 'active' : ''\n              }`}\n              onClick={() => {\n                this.setState(\n                  { joinLocation: 'server', useBatch: false },\n                  () => {\n                    this.loadPosts();\n                    app.set('useBatch', false);\n                  }\n                );\n              }}\n            >\n              Server\n            </button>\n            <button\n              disabled={loading}\n              className={`btn btn-primary ${useBatch ? 'active' : ''}`}\n              onClick={() => {\n                this.setState(\n                  { joinLocation: 'client', useBatch: true },\n                  () => {\n                    this.loadPosts();\n                    app.set('useBatch', true);\n                  }\n                );\n              }}\n            >\n              feathers-batch\n            </button>\n          </div>\n          <p className=\"lead\">\n            Choose between doing the joins on the client or the server. See also{' '}\n            <a\n              href=\"https://github.com/feathersjs-ecosystem/feathers-batch\"\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n            >\n              feathers-batch\n            </a>\n          </p>\n        </div>\n\n        <div className=\"mb-4\">\n          <h4>Methods</h4>\n          <div className=\"btn-group mb-2\">\n            <button\n              disabled={loading}\n              className={`btn btn-primary ${\n                method === 'primary' ? 'active' : ''\n              }`}\n              onClick={() => {\n                this.setState({ method: 'primary' }, this.loadPosts);\n              }}\n            >\n              Get/Find\n            </button>\n            <button\n              disabled={loading}\n              className={`btn btn-primary ${\n                method === 'cached' ? 'active' : ''\n              }`}\n              onClick={() => {\n                this.setState({ method: 'cached' }, this.loadPosts);\n              }}\n            >\n              Cached Get/Find\n            </button>\n            <button\n              disabled={loading}\n              className={`btn btn-primary ${method === 'load' ? 'active' : ''}`}\n              onClick={() => {\n                this.setState({ method: 'load' }, this.loadPosts);\n              }}\n            >\n              Load/LoadMany\n            </button>\n          </div>\n          <ul>\n            <li className=\"lead\">\n              Get/Find - Use standard Feathers .get() and .find() methods\n            </li>\n            <li className=\"lead\">\n              Cached Get/Find - Use feathers-dataloader cached .get() and\n              .find() methods\n            </li>\n            <li className=\"lead\">\n              Load/LoadMany - Use feathers-dataloader .load() and .loadMany()\n              methods\n            </li>\n          </ul>\n        </div>\n\n        {error && <div className=\"alert alert-danger\">{error.message}</div>}\n\n        <div className=\"mb-4 p-3 bg-light\">\n          <h3>\n            Duration:{' '}\n            {loading ? (\n              <div\n                className=\"spinner-border\"\n                style={{\n                  width: '2rem',\n                  height: '2rem'\n                }}\n              ></div>\n            ) : (\n              <span className=\"text-success\">{duration}ms</span>\n            )}\n          </h3>\n        </div>\n\n        <div className=\"row mb-4\">\n          <div className=\"col\">\n            <h4>Server Profile</h4>\n            {serverProfile && (\n              <pre className=\"p-3 bg-light\">\n                {JSON.stringify(serverProfile, null, 2)}\n              </pre>\n            )}\n          </div>\n          <div className=\"col\">\n            <h4>Client Profile</h4>\n            {clientProfile && (\n              <pre className=\"p-3 bg-light\">\n                {JSON.stringify(clientProfile, null, 2)}\n              </pre>\n            )}\n          </div>\n        </div>\n        <div>\n          <div className=\"mb-4\">\n            <h4>Results</h4>\n            {posts && (\n              <pre className=\"p-3 bg-light\">\n                {JSON.stringify(posts, null, 2)}\n              </pre>\n            )}\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n","import io from 'socket.io-client';\nimport feathers from '@feathersjs/client';\nimport BatchLoader from '@feathers-plus/batch-loader';\nimport appHooks from './app.hooks';\n// import { batchClient } from 'feathers-batch/client';\nimport { batchClient } from './batchClient';\n\nimport posts from './posts';\nimport profile from './profile';\nimport categories from './categories';\nimport users from './users';\n\nprocess.hrtime = require('browser-process-hrtime');\nconst { profiler, getProfile, clearProfile } = require('feathers-profiler');\n\nconst app = feathers();\n\nconst urlParams = new URLSearchParams(window.location.search);\nconst provider = urlParams.get('provider') || 'socket';\n\nif (provider === 'rest') {\n  app.configure(feathers.rest('http://localhost:3030').fetch(fetch));\n} else {\n  app.configure(feathers.socketio(io('http://localhost:3030')));\n}\n\napp.configure(feathers.authentication());\n\n// Add a nice mixin to services that allow you to easily\n// create batchLoaders w/o all the config\napp.mixins.push(function (service) {\n  service.loaderFactory = function (opts = {}) {\n    if (!service.find) {\n      throw new Error(\n        `Cannot call the loaderFactory() method on this service because it does not have a find() method.`\n      );\n    }\n    const { params = {}, ...rest } = opts;\n    const options = {\n      id: '_id',\n      multi: false,\n      ...rest\n    };\n    const serviceParams = {\n      paginate: false,\n      ...params\n    };\n    return new BatchLoader(async (keys) => {\n      const result = await service.find({\n        ...serviceParams,\n        query: {\n          [options.id]: { $in: BatchLoader.getUniqueKeys(keys) },\n          ...serviceParams.query\n        }\n      });\n      return BatchLoader.getResultsByKey(\n        keys,\n        result.data ? result.data : result,\n        (rec) => rec[options.id],\n        options.multi ? '[!]' : '!'\n      );\n    });\n  };\n});\n\napp.configure(posts);\napp.configure(profile);\napp.configure(categories);\napp.configure(users);\n\n// Setup profiler\napp.configure(\n  profiler({\n    logger: null,\n    stats: 'total'\n  })\n);\n\napp.set('profiler', {\n  getProfile,\n  clearProfile\n});\n\napp.hooks(appHooks);\n\n// Setup feathers-batch\napp.configure(\n  batchClient({\n    batchService: 'api/batch',\n    exclude: ['server/profile', 'client/profile', 'authentication']\n  })\n);\n\napp.setup(app);\n\nexport default app;\n","import { setupLoader, paramsForServer } from 'shared';\n\nexport default {\n  before: {\n    all: [setupLoader, paramsForServer],\n    find: [],\n    get: [],\n    create: [],\n    update: [],\n    patch: [],\n    remove: []\n  },\n\n  after: {\n    all: [],\n    find: [],\n    get: [],\n    create: [],\n    update: [],\n    patch: [],\n    remove: []\n  },\n\n  error: {\n    all: [\n      (context) => {\n        console.error(context.error);\n      }\n    ],\n    find: [],\n    get: [],\n    create: [],\n    update: [],\n    patch: [],\n    remove: []\n  }\n};\n","// Note this file is directly copy pasted from the\n// feathers-batch source code so that it can add\n// the code on lines 75-77. It is also updated\n// to use ESM modules instead of CommonJS so\n// CRA does not bark...\n// It is otherwise unchanged.\n\nconst { convert } = require('@feathersjs/errors');\n\nexport class BatchManager {\n  constructor(app, options) {\n    this.app = app;\n    this.batches = [];\n    this.timeout = null;\n    this.options = options;\n  }\n\n  addBatchCall(batch) {\n    this.batches.push(batch);\n\n    if (this.timeout === null) {\n      this.timeout = setTimeout(() => this.flush(), this.options.timeout || 50);\n    }\n  }\n\n  async flush() {\n    const currentBatches = this.batches;\n\n    this.batches = [];\n    this.timeout = null;\n\n    const { batchService } = this.options;\n    const results = await this.app.service(batchService).create({\n      calls: currentBatches.map(({ payload }) => payload)\n    });\n\n    currentBatches.forEach((batch, index) => {\n      const callResult = results[index];\n\n      if (callResult.status === 'fulfilled') {\n        batch.resolve(callResult.value);\n      } else {\n        batch.reject(convert(callResult.reason));\n      }\n    });\n  }\n}\n\nexport const makeArguments = (context) => {\n  const { query = {} } = context.params;\n\n  switch (context.method) {\n    case 'get':\n    case 'remove':\n      return [context.id, query];\n    case 'update':\n    case 'patch':\n      return [context.id, context.data, query];\n    case 'create':\n      return [context.data, query];\n    default:\n      return [query];\n  }\n};\n\nexport const batchClient = (options) => (app) => {\n  if (typeof options.batchService !== 'string') {\n    throw new Error('`batchService` name option must be passed to batchClient');\n  }\n\n  const excludes = (options.exclude || []).concat(options.batchService);\n  const manager = new BatchManager(app, options);\n  const collectBatches = async (context) => {\n    const { method, path } = context;\n\n    if (!app.get('useBatch')) {\n      return context;\n    }\n\n    if (excludes.includes(path)) {\n      return context;\n    }\n\n    const args = makeArguments(context);\n    const payload = [method, path, ...args];\n    const batchPromise = new Promise((resolve, reject) =>\n      manager.addBatchCall({\n        resolve,\n        reject,\n        payload\n      })\n    );\n\n    context.result = await batchPromise;\n\n    return context;\n  };\n\n  app.hooks({\n    before: collectBatches\n  });\n};\n","import { switchHook } from 'shared';\n\nexport default (app) => {\n  app.service('api/posts').hooks({\n    before: {\n      all: []\n    },\n    after: {\n      all: [switchHook('posts', 'client')]\n    }\n  });\n};\n","export default (app) => {\n  class Profile {\n    constructor(options, app) {\n      this.options = options || {};\n    }\n\n    setup(app) {\n      this.app = app;\n      this.profiler = app.get('profiler');\n    }\n\n    async find(params) {\n      return this.profiler.getProfile();\n    }\n\n    async create(data, params) {\n      if (this.profiler.getProfile()) {\n        this.profiler.clearProfile();\n      }\n      return {};\n    }\n  }\n\n  app.use('client/profile', new Profile());\n\n  app.service('client/profile').hooks({\n    after: {\n      all: [\n        (context) => {\n          delete context._log;\n          delete context.result['client/profile'];\n          delete context.result['server/profile'];\n          return context;\n        }\n      ]\n    }\n  });\n\n  return app;\n};\n","import { switchHook } from 'shared';\n\nexport default (app) => {\n  app.service('api/categories').hooks({\n    before: {\n      all: []\n    },\n    after: {\n      all: [switchHook('categories', 'client')]\n    }\n  });\n};\n","import { switchHook } from 'shared';\n\nexport default (app) => {\n  app.service('api/users').hooks({\n    before: {\n      all: []\n    },\n    after: {\n      all: [switchHook('users', 'client')]\n    }\n  });\n};\n"],"sourceRoot":""}